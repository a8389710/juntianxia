<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <div>摇一摇</div>
  <script src="jquery.min.js"></script>
  <script>

if(window.DeviceMotionEvent) {
    var speed = 30;    // 用来判定的加速度阈值，太大了则很难触发
    var x, y, z, lastX, lastY, lastZ;
    x = y = z = lastX = lastY = lastZ = 0;
		
	window.addEventListener('devicemotion', function(event){
		 var acceleration = event.accelerationIncludingGravity;
		 x = acceleration.x;
		 y = acceleration.y;
		 if(Math.abs(x-lastX) > speed || Math.abs(y-lastY) > speed) {
		    if(navigator.vibrate) {
			    navigator.vibrate(500)
		    }
		    alert("摇一摇成功");
		 }
		 lastX = x;
		 lastY = y;
	}, false);
}



  </script>
</body>
</html>